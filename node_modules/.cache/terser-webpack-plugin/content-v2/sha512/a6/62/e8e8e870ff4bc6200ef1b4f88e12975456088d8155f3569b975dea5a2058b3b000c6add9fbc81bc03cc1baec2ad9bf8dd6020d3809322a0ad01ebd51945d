{"code":"!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),console.log(\"here\"),window.monday=this,this.listeners={},this.init=this.init.bind(this),this.token=this.token.bind(this),this.api=this.api.bind(this),this.localApi=this.localApi.bind(this),this.receiveMessage=this.receiveMessage.bind(this),this.listen=this.listen.bind(this),this.addListener=this.addListener.bind(this),this.authenticate=this.authenticate.bind(this)}var t,r,o;return t=e,(r=[{key:\"init\",value:function(e){this.clientId=e,window.addEventListener(\"message\",this.receiveMessage,!1)}},{key:\"token\",value:function(e){this.apiToken=e}},{key:\"api\",value:function(e){var t=this;return this.apiToken?mondayApi({query:e},{token:this.apiToken}):new Promise((function(n,i){t.localApi(\"api\",{query:e}).then((function(e){n(e.data)}))}))}},{key:\"localApi\",value:function(e,t){var n=this;return new Promise((function(i,r){var o=Math.random().toString(36).substr(2,9),s=n.clientId;window.parent.postMessage({method:e,args:t,requestId:o,clientId:s},\"*\"),n.addListener(o,(function(e){i(e)}))}))}},{key:\"receiveMessage\",value:function(e){var t=e.data,i=t.method,r=t.requestId,o=this.listeners[i]||[],s=this.listeners[r]||[],a=[].concat(n(o),n(s));a&&a.forEach((function(t){t(e.data)}))}},{key:\"listen\",value:function(e,t){this.addListener(e,t),this.localApi(\"listen\",{type:e})}},{key:\"addListener\",value:function(e,t){this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t)}},{key:\"authenticate\",value:function(){var e=\"https://auth.monday.com/oauth/authorize?client_id=\".concat(this.clientId,\"&scope=me:monday_service_session\");window.location=e}}])&&i(t.prototype,r),o&&i(t,o),e}();console.log(\"1111111\"),new r}]);","extractedComments":[]}